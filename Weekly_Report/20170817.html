<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2017/08/17 - NDN Packet Format &mdash; Alvin&#39;s Document 1.0 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2017/08/03 - Named Data Networking (NDN) installation guide - part 1" href="20170803.html" />
    <link rel="prev" title="2017/08/24 - (Paper) NDN.JS: A JavaScript Client Library for Named Data Networking" href="20170824.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Alvin's Document
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tech_note.html">Tech Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../weekly_report.html">My Lab Weekly Report</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="20180510.html">2018/05/10 - C++ Bus error v.s Segmentation fault</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180404.html">2018/04/04 - Javascript ES6 Promise</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180403.html">2018/04/03 - Javascript ES6 Arrow function</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180129.html">2018/01/29 - Single Sign-on</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180101.html">2018/01/01 - Patent Discussion 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171127.html">2017/11/27 - Firepad</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171120.html">2017/11/20 - (Paper) Sharing mHealth Data via Named Data Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171113.html">2017/11/13 - Named Data Networking (NDN) installation guide - part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170918.html">2017/09/18 - (Paper) The Story of ChronoShare, or How NDN Brought Distrubuted Secure File Sharing Back</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170911.html">2017/09/11 - MicroForwarder.js: an NDN Forwarder Extension for Web Browsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170831.html">2017/08/31 - NDN-JS Usages</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170824.html">2017/08/24 - (Paper) NDN.JS: A JavaScript Client Library for Named Data Networking</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2017/08/17 - NDN Packet Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170803.html">2017/08/03 - Named Data Networking (NDN) installation guide - part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170727.html">2017/07/27 - (Paper) Video Streaming over Named Data Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170720.html">2017/07/20 - (Paper) Implementing Instant Messaging Using Named Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170713.html">2017/07/13 - Advanced Information Security Summer School Pre-Exam</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170622.html">2017/06/22 - Chronos:Serverless Multi-User Chat Over NDN</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170601.html">2017/06/01 - Design a LINE Bot : Weather Bot!</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170525.html">2017/05/25 - GitHub pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170503.html">2017/05/04 - (Paper) Let’s ChronoSync: Decentralized Dataset State Synchronization in Named Data Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170413.html">2017/04/13 - Web Application Messaging Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170406.html">2017/04/06 - Git tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170330.html">2017/03/30 - (Paper) Adaptive Video Multicast over the Internet - Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170323.html">2017/03/23 - Authenticating Node.js Applications With Passport</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170316.html">2017/03/16 - WebRTC API Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170309.html">2017/03/09 - (Paper) Adaptive Video Multicast over the Internet - Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170302.html">2017/03/02 -  Nodejs -&gt; Express-generator, Express , MogoDB , Session , and Jade</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170216.html">2017/02/16 - (Paper) Internet Multicast Video Delivery</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170112.html">2017/01/12 - WebSocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170105.html">2017/01/05 - (Patent) Systems and methods for collaborative note-taking - part 2 </a></li>
<li class="toctree-l2"><a class="reference internal" href="20161229.html">2016/12/29 - (Patent) Systems and methods for collaborative note-taking</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161222.html">2016/12/22 - TDOH conference</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161215.html">2016/12/15 - Dynamic Link Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161208.html">2016/12/08 - Research of Web Real-Time Communication Based on Web Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161201.html">2016/12/01 - Server-Sent Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161124.html">2016/11/24 - C++ Overloading, Abstract Class and Polymorphism</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161112.html">2016/11/12 - Report of using Zoneminder to connect IP Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161105.html">2016/11/05 - SSDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="20161029.html">2016/10/29 - Sphinx</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../business_weekly.html">Business Weekly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc.html">Misc Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writeup.html">Write up</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Alvin's Document</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../weekly_report.html">My Lab Weekly Report</a> &raquo;</li>
      <li>2017/08/17 - NDN Packet Format</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="ndn-packet-format">
<h1>2017/08/17 - NDN Packet Format<a class="headerlink" href="#ndn-packet-format" title="Permalink to this headline">¶</a></h1>
<div class="section" id="type-length-value-tlv-encoding">
<h2>Type-Length-Value (TLV) Encoding <a class="footnote-reference brackets" href="#id6" id="id1">1</a><a class="headerlink" href="#type-length-value-tlv-encoding" title="Permalink to this headline">¶</a></h2>
<p>Each NDN packet is encoded in a <em>Type-Length-Value (TLV)</em> format. NDN Interest and Data packets are distinguished by the type number in the first and outmost <em>TLV0</em>.</p>
<p>An NDN packet is mainly a <strong>collection of TLVs</strong> inside TLV0. Some TLVs may contain sub-TLVs, and each sub-TLV may also be further nested.</p>
<div class="section" id="variable-size-encoding-for-type-t-and-length-l">
<h3>Variable Size Encoding for type (T) and length (L)<a class="headerlink" href="#variable-size-encoding-for-type-t-and-length-l" title="Permalink to this headline">¶</a></h3>
<p>To minimize the overhead during early deployment and to allow flexibility of future protocol extensions to meet unforeseeable needs, both type (T) and length (L) take a variable size format. For implementation simplicity, both type and length take the same encoding format.</p>
</div>
<div class="section" id="tlv-encoding">
<h3>TLV Encoding<a class="headerlink" href="#tlv-encoding" title="Permalink to this headline">¶</a></h3>
<p>TLV encoding for NDN packets is defined as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>NDN-TLV := TLV-TYPE TLV-LENGTH TLV-VALUE?
TLV-TYPE := VAR-NUMBER
TLV-LENGTH := VAR-NUMBER
TLV-VALUE := BYTE+
</pre></div>
</div>
<p>TLV-TYPE SHOULD be unique at all nested levels. The TLV Type number space and initial assignments listed in Section <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/types.html#types">TLV-TYPE number assignment</a> of this document.</p>
<a class="reference internal image-reference" href="../_images/20170817-1.png"><img alt="../_images/20170817-1.png" src="../_images/20170817-1.png" style="width: 287.0px; height: 388.0px;" /></a>
</div>
</div>
<div class="section" id="name">
<h2>Name <a class="footnote-reference brackets" href="#id7" id="id2">2</a><a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>An NDN Name is a hierarchical name for NDN content, which contains a sequence of name components.</p>
<div class="section" id="ndn-name-format">
<h3>NDN Name Format<a class="headerlink" href="#ndn-name-format" title="Permalink to this headline">¶</a></h3>
<p>We use a 2-level nested TLV to represent a name. The Type in the outer TLV indicates this is a Name. Inner TLVs should be one of NameComponent blocks, as defined in the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Name</span> <span class="p">::</span><span class="o">=</span> <span class="n">NAME</span><span class="o">-</span><span class="n">TYPE</span> <span class="n">TLV</span><span class="o">-</span><span class="n">LENGTH</span> <span class="n">NameComponent</span><span class="o">*</span>

<span class="n">NameComponent</span> <span class="p">::</span><span class="o">=</span> <span class="n">GenericNameComponent</span> <span class="o">|</span>
                  <span class="n">ImplicitSha256DigestComponent</span>

<span class="n">GenericNameComponent</span> <span class="p">::</span><span class="o">=</span> <span class="n">NAME</span><span class="o">-</span><span class="n">COMPONENT</span><span class="o">-</span><span class="n">TYPE</span> <span class="n">TLV</span><span class="o">-</span><span class="n">LENGTH</span> <span class="n">BYTE</span><span class="o">*</span>

<span class="n">ImplicitSha256DigestComponent</span> <span class="p">::</span><span class="o">=</span> <span class="n">IMPLICIT</span><span class="o">-</span><span class="n">SHA256</span><span class="o">-</span><span class="n">DIGEST</span><span class="o">-</span><span class="n">COMPONENT</span><span class="o">-</span><span class="n">TYPE</span> <span class="n">TLV</span><span class="o">-</span><span class="n">LENGTH</span><span class="p">(</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
                                  <span class="n">BYTE</span><span class="p">{</span><span class="mi">32</span><span class="p">}</span>
</pre></div>
</div>
<p>In Wireshark :</p>
<img alt="../_images/20170817-2.png" src="../_images/20170817-2.png" />
</div>
<div class="section" id="ndn-uri-scheme">
<h3>NDN URI Scheme<a class="headerlink" href="#ndn-uri-scheme" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The scheme identifier is <strong>ndn</strong>.</p></li>
<li><p>The authority component (the part after the initial // in the familiar http and ftp URI schemes) is not relevant to NDN. It should not be present, and it is ignored if it is present.</p></li>
<li><p><a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/name.html#ndn-uri-scheme">Component types have the following URI representations</a></p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="interest-packet">
<h2>Interest Packet<a class="headerlink" href="#interest-packet" title="Permalink to this headline">¶</a></h2>
<p>NDN Interest packet is TLV defined as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Interest ::= INTEREST-TYPE TLV-LENGTH
             Name
             Selectors?
             Nonce
             InterestLifetime?
             ForwardingHint?
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Name</span></code> and <code class="docutils literal notranslate"><span class="pre">Nonce</span></code> are the only two required elements in an Interest packet.
<code class="docutils literal notranslate"><span class="pre">Selectors</span></code> are optional elements that further qualify Data that may match the Interest. They are used for discovering and selecting the Data that matches best to what the application wants.
<code class="docutils literal notranslate"><span class="pre">InterestLifetime</span></code> and <code class="docutils literal notranslate"><span class="pre">ForwardingHint</span></code> are optional and are referred to as <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/interest.html#guiders">Guiders</a>. They affect Interest forwarding behavior.</p>
<div class="section" id="id3">
<h3>Name<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The Name element in an Interest is synonymous with the term <em>prefix</em>.
The Name element that can be put in the Interest is further restricted to have at least one NameComponent. Interests that include Name TLV that has zero name components MUST BE discarded.</p>
</div>
<div class="section" id="exclude">
<h3>Exclude <a class="footnote-reference brackets" href="#id8" id="id4">3</a><a class="headerlink" href="#exclude" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Exclude</span></code> selectors allow requesters to specify list and/or ranges of name components that MUST NOT appear as a continuation of the Name prefix in the responding Data packet to the Interest.</p>
<blockquote>
<div><p>For example, if Interest is expressed for <strong>/ndn/edu</strong> and Exclude specifies one name component <strong>ucla</strong>, then neither data producer nor conforming NDN routers are allowed to return any Data packet that has prefix <strong>/ndn/edu/ucla</strong>.</p>
</div></blockquote>
</div>
<div class="section" id="nonce">
<h3>Nonce<a class="headerlink" href="#nonce" title="Permalink to this headline">¶</a></h3>
<p>Nonce defined as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Nonce</span> <span class="p">::</span><span class="o">=</span> <span class="n">NONCE</span><span class="o">-</span><span class="n">TYPE</span> <span class="n">TLV</span><span class="o">-</span><span class="n">LENGTH</span><span class="p">(</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="n">BYTE</span><span class="p">{</span><span class="mi">4</span><span class="p">}</span>
</pre></div>
</div>
<p>The Nonce carries a randomly-generated 4-octet long byte-string. The combination of Name and Nonce should uniquely identify an Interest packet. This is used to detect looping Interests.</p>
</div>
</div>
<div class="section" id="data-packet">
<h2>Data Packet <a class="footnote-reference brackets" href="#id9" id="id5">4</a><a class="headerlink" href="#data-packet" title="Permalink to this headline">¶</a></h2>
<p>The Data packet represents some arbitrary binary data (held in the Content element) together with its Name, some additional bits of information (MetaInfo), and a digital Signature of the other three elements. The Name is the first element since all NDN packet processing starts with the name. Signature is put at the end of the packet to ease the implementation because signature computation covers all the elements before Signature.</p>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Type-Length-Value (TLV) Encoding :  <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/tlv.html">http://named-data.net/doc/NDN-TLV/current/tlv.html</a></p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Name : <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/name.html">http://named-data.net/doc/NDN-TLV/current/name.html</a></p>
</dd>
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>Interest Pakcet : <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/interest">http://named-data.net/doc/NDN-TLV/current/interest</a>.html#</p>
</dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id5">4</a></span></dt>
<dd><p>Exclude : <a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/interest.html#exclude">http://named-data.net/doc/NDN-TLV/current/interest.html#exclude</a></p>
</dd>
<dt class="label" id="id10"><span class="brackets">5</span></dt>
<dd><p>Data Packet :　<a class="reference external" href="http://named-data.net/doc/NDN-TLV/current/data.html">http://named-data.net/doc/NDN-TLV/current/data.html</a></p>
</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="20170824.html" class="btn btn-neutral float-left" title="2017/08/24 - (Paper) NDN.JS: A JavaScript Client Library for Named Data Networking" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="20170803.html" class="btn btn-neutral float-right" title="2017/08/03 - Named Data Networking (NDN) installation guide - part 1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, Alvin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>